{"version":3,"file":"560.TerriaJS-specs.js","mappings":"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","sources":["webpack://terriajs/./lib/ReactViews/Tools/DiffTool/DatePicker.tsx","webpack://terriajs/./lib/ReactViews/Tools/DiffTool/LocationPicker.tsx","webpack://terriajs/./lib/ReactViews/Tools/DiffTool/DiffTool.tsx"],"sourcesContent":["import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport _styled, { default as _styled2, default as _styled3 } from \"styled-components\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.date.to-iso-string.js\";\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nimport dateFormat from \"dateformat\";\nimport { observer } from \"mobx-react\";\nimport { forwardRef, useCallback, useImperativeHandle, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport styled from \"styled-components\";\nimport JulianDate from \"terriajs-cesium/Source/Core/JulianDate\";\nimport CommonStrata from \"../../../Models/Definition/CommonStrata\";\nimport Box from \"../../../Styled/Box\";\nimport Button from \"../../../Styled/Button\";\nimport Icon, { StyledIcon } from \"../../../Styled/Icon\";\nimport Spacing from \"../../../Styled/Spacing\";\nimport Text, { TextSpan } from \"../../../Styled/Text\";\nimport { formatDateTime } from \"../../BottomDock/Timeline/DateFormats\";\nimport DateTimePicker from \"../../BottomDock/Timeline/DateTimePicker\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar DatePicker = /*#__PURE__*/forwardRef(function (props, ref) {\n  var heading = props.heading,\n    item = props.item,\n    onDateSet = props.onDateSet;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var _useState = useState(false),\n    _useState2 = _slicedToArray(_useState, 2),\n    isOpen = _useState2[0],\n    setIsOpen = _useState2[1];\n  var currentDate = useMemo(function () {\n    var date = item.currentDiscreteJulianDate;\n    return date && JulianDate.toDate(date);\n  }, [item.currentDiscreteJulianDate]);\n  var formattedCurrentDate = useMemo(function () {\n    if (currentDate === undefined) {\n      return;\n    }\n    var dateFormatting = undefined; // TODO\n    var formattedDate = dateFormatting !== undefined ? dateFormat(currentDate, dateFormatting) : formatDateTime(currentDate);\n    return formattedDate;\n  }, [currentDate]);\n  var toggleOpen = useCallback(function () {\n    setIsOpen(!isOpen);\n  }, [isOpen]);\n  var changeCurrentDate = useCallback(function (date) {\n    item.setTrait(CommonStrata.user, \"currentTime\", date.toISOString());\n    onDateSet();\n  }, [item, onDateSet]);\n  var moveToPreviousDate = useCallback(function () {\n    item.moveToPreviousDiscreteTime(CommonStrata.user);\n    onDateSet();\n  }, [item, onDateSet]);\n  var moveToNextDate = useCallback(function () {\n    item.moveToNextDiscreteTime(CommonStrata.user);\n    onDateSet();\n  }, [item, onDateSet]);\n  useImperativeHandle(ref, function () {\n    return {\n      open: function open() {\n        setIsOpen(true);\n      },\n      close: function close() {\n        setIsOpen(false);\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxs(Box, {\n    column: true,\n    centered: true,\n    flex: 1,\n    children: [/*#__PURE__*/_jsx(Spacing, {\n      bottom: 4\n    }), /*#__PURE__*/_jsxs(Box, {\n      centered: true,\n      children: [/*#__PURE__*/_jsx(_StyledStyledIcon, {\n        light: true,\n        styledWidth: \"21px\",\n        glyph: Icon.GLYPHS.calendar2,\n        $_css: \"margin-top:-2px;\"\n      }), /*#__PURE__*/_jsx(Spacing, {\n        right: 2\n      }), /*#__PURE__*/_jsx(Text, {\n        textLight: true,\n        extraLarge: true,\n        children: heading\n      })]\n    }), /*#__PURE__*/_jsx(Spacing, {\n      bottom: 2\n    }), /*#__PURE__*/_jsxs(Box, {\n      children: [/*#__PURE__*/_jsx(PrevButton, {\n        disabled: item.isPreviousDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.previousDateTitle\"),\n        onClick: moveToPreviousDate\n      }), /*#__PURE__*/_jsx(DateButton, {\n        primary: true,\n        isOpen: isOpen,\n        onClick: toggleOpen,\n        title: t(\"diffTool.datePicker.dateButtonTitle\"),\n        children: /*#__PURE__*/_jsx(TextSpan, {\n          extraLarge: true,\n          children: formattedCurrentDate || \"-\"\n        })\n      }), /*#__PURE__*/_jsx(NextButton, {\n        disabled: item.isNextDiscreteTimeAvailable === false,\n        title: t(\"diffTool.datePicker.nextDateTitle\"),\n        onClick: moveToNextDate\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        display: isOpen ? \"block\" : \"none\",\n        position: \"absolute\"\n      },\n      children: /*#__PURE__*/_jsx(DateTimePicker, {\n        currentDate: currentDate,\n        dates: item.objectifiedDates,\n        onChange: changeCurrentDate,\n        openDirection: \"up\",\n        isOpen: isOpen,\n        onClose: function onClose() {\n          return setIsOpen(false);\n        }\n      })\n    }), /*#__PURE__*/_jsx(Spacing, {\n      bottom: 4\n    })]\n  });\n});\nDatePicker.displayName = \"DatePicker\";\nvar PagerButton = styled(Button).attrs({\n  iconProps: {\n    css: \"margin-right:0;\"\n  }\n}).withConfig({\n  displayName: \"DatePicker__PagerButton\",\n  componentId: \"sc-11kes1x-0\"\n})([\"cursor:pointer;background-color:\", \";width:40px;border:1px solid transparent;\", \" flex-direction:column;\"], function (props) {\n  return props.theme.colorPrimary;\n}, function (_ref) {\n  var theme = _ref.theme;\n  return theme.centerWithFlex();\n});\nvar PrevButton = styled(PagerButton).attrs({\n  renderIcon: function renderIcon() {\n    return /*#__PURE__*/_jsx(_StyledStyledIcon2, {\n      light: true,\n      styledWidth: \"15px\",\n      glyph: Icon.GLYPHS.arrowDown\n    });\n  }\n}).withConfig({\n  displayName: \"DatePicker__PrevButton\",\n  componentId: \"sc-11kes1x-1\"\n})([\"\", \" margin-right:1px;\"], function (_ref2) {\n  var theme = _ref2.theme;\n  return theme.borderRadiusLeft(theme.radius40Button);\n});\nvar NextButton = styled(PagerButton).attrs({\n  renderIcon: function renderIcon() {\n    return /*#__PURE__*/_jsx(_StyledStyledIcon3, {\n      light: true,\n      styledWidth: \"15px\",\n      glyph: Icon.GLYPHS.arrowDown\n    });\n  }\n}).withConfig({\n  displayName: \"DatePicker__NextButton\",\n  componentId: \"sc-11kes1x-2\"\n})([\"\", \" margin-left:1px;\"], function (_ref3) {\n  var theme = _ref3.theme;\n  return theme.borderRadiusRight(theme.radius40Button);\n});\nvar DateButton = styled(Button).withConfig({\n  displayName: \"DatePicker__DateButton\",\n  componentId: \"sc-11kes1x-3\"\n})([\"z-index:0;\", \";border-radius:0px;border:1px solid \", \";min-width:235px;@media (max-width:\", \"px){min-width:150px;}\"], function (props) {\n  return props.isOpen && \"z-index: 1000;\";\n}, function (props) {\n  return props.theme.colorPrimary;\n}, function (props) {\n  return props.theme.lg;\n});\nexport default observer(DatePicker);\nvar _StyledStyledIcon = styled(StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon\",\n  componentId: \"sc-11kes1x-4\"\n})([\"\", \"\"], function (p) {\n  return p.$_css;\n});\nvar _StyledStyledIcon2 = styled(StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon2\",\n  componentId: \"sc-11kes1x-5\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledStyledIcon3 = styled(StyledIcon).withConfig({\n  displayName: \"DatePicker___StyledStyledIcon3\",\n  componentId: \"sc-11kes1x-6\"\n})([\"transform:rotate(270deg);\"]);","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.symbol.to-primitive.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.reverse.js\";\nimport \"core-js/modules/es.date.to-primitive.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.function.bind.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.create.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.set-prototype-of.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.reflect.construct.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nvar _class, _class2, _descriptor, _descriptor2, _descriptor3;\nfunction _initializerDefineProperty(e, i, r, l) { r && Object.defineProperty(e, i, { enumerable: r.enumerable, configurable: r.configurable, writable: r.writable, value: r.initializer ? r.initializer.call(l) : void 0 }); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _applyDecoratedDescriptor(i, e, r, n, l) { var a = {}; return Object.keys(n).forEach(function (i) { a[i] = n[i]; }), a.enumerable = !!a.enumerable, a.configurable = !!a.configurable, (\"value\" in a || a.initializer) && (a.writable = !0), a = r.slice().reverse().reduce(function (r, n) { return n(i, e, r) || r; }, a), l && void 0 !== a.initializer && (a.value = a.initializer ? a.initializer.call(l) : void 0, a.initializer = void 0), void 0 === a.initializer ? (Object.defineProperty(i, e, a), null) : a; }\nfunction _initializerWarningHelper(r, e) { throw Error(\"Decorating class property failed. Please ensure that transform-class-properties is enabled and runs after the decorators transform.\"); }\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nimport { action, makeObservable, observable, reaction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { Component } from \"react\";\nimport Ellipsoid from \"terriajs-cesium/Source/Core/Ellipsoid\";\nimport CesiumMath from \"terriajs-cesium/Source/Core/Math\";\nimport markerIcon from \"../../../../wwwroot/images/difference-pin.png\";\nimport { addMarker, removeMarker } from \"../../../Models/LocationMarkerUtils\";\nimport MapInteractionMode, { UIMode } from \"../../../Models/MapInteractionMode\";\nimport Loader from \"../../Loader\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar LocationPicker = observer(_class = (_class2 = /*#__PURE__*/function (_Component) {\n  function LocationPicker(props) {\n    var _this;\n    _classCallCheck(this, LocationPicker);\n    _this = _callSuper(this, LocationPicker, [props]);\n    _initializerDefineProperty(_this, \"pickMode\", _descriptor, _this);\n    _initializerDefineProperty(_this, \"currentPick\", _descriptor2, _this);\n    _initializerDefineProperty(_this, \"pickDisposer\", _descriptor3, _this);\n    makeObservable(_this);\n    return _this;\n  }\n  _inherits(LocationPicker, _Component);\n  return _createClass(LocationPicker, [{\n    key: \"setupPicker\",\n    value: function setupPicker() {\n      var _this2 = this;\n      var _this$props = this.props,\n        terria = _this$props.terria,\n        location = _this$props.location,\n        onPicking = _this$props.onPicking,\n        onPicked = _this$props.onPicked;\n      this.pickMode = new MapInteractionMode({\n        message: \"\",\n        messageAsNode: /*#__PURE__*/_jsx(\"div\", {}),\n        uiMode: UIMode.Difference\n      });\n      addInteractionModeToMap(terria, this.pickMode);\n      if (location) showMarker(terria, location);\n      this.pickDisposer = reaction(function () {\n        return _this2.pickMode.pickedFeatures;\n      }, action(function (newPick) {\n        var _newPick$allFeaturesA;\n        if (newPick === undefined || newPick.pickPosition === undefined) {\n          return;\n        }\n        _this2.pickMode.customUi = function () {\n          return /*#__PURE__*/_jsx(Loader, {\n            message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n          });\n        };\n        var position = cartesianToDegrees(newPick.pickPosition);\n        showMarker(_this2.props.terria, position);\n        _this2.currentPick = newPick;\n        onPicking(position);\n        (_newPick$allFeaturesA = newPick.allFeaturesAvailablePromise) === null || _newPick$allFeaturesA === void 0 || _newPick$allFeaturesA.then(function () {\n          if (newPick === _this2.currentPick) {\n            onPicked(newPick, position);\n          }\n        });\n      }));\n    }\n  }, {\n    key: \"destroyPicker\",\n    value: function destroyPicker() {\n      var _this$pickDisposer;\n      var terria = this.props.terria;\n      if (this.pickMode) {\n        removeInteractionModeFromMap(terria, this.pickMode);\n      }\n      removeMarker(terria);\n      this.pickMode = undefined;\n      this.currentPick = undefined;\n      (_this$pickDisposer = this.pickDisposer) === null || _this$pickDisposer === void 0 || _this$pickDisposer.call(this);\n      this.pickDisposer = undefined;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupPicker();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.destroyPicker();\n      this.setupPicker();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.destroyPicker();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return null;\n    }\n  }]);\n}(Component), _descriptor = _applyDecoratedDescriptor(_class2.prototype, \"pickMode\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class2.prototype, \"currentPick\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor3 = _applyDecoratedDescriptor(_class2.prototype, \"pickDisposer\", [observable], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _applyDecoratedDescriptor(_class2.prototype, \"setupPicker\", [action], Object.getOwnPropertyDescriptor(_class2.prototype, \"setupPicker\"), _class2.prototype), _applyDecoratedDescriptor(_class2.prototype, \"destroyPicker\", [action], Object.getOwnPropertyDescriptor(_class2.prototype, \"destroyPicker\"), _class2.prototype), _class2)) || _class;\nexport { LocationPicker as default };\nfunction addInteractionModeToMap(terria, mode) {\n  terria.mapInteractionModeStack.push(mode);\n}\nfunction removeInteractionModeFromMap(terria, mode) {\n  var _terria$mapInteractio = terria.mapInteractionModeStack.slice(-1),\n    _terria$mapInteractio2 = _slicedToArray(_terria$mapInteractio, 1),\n    currentMode = _terria$mapInteractio2[0];\n  if (currentMode === mode) {\n    terria.mapInteractionModeStack.pop();\n  }\n}\nfunction showMarker(terria, location) {\n  addMarker(terria, {\n    name: \"User selection\",\n    location: location,\n    customMarkerIcon: markerIcon\n  });\n}\nfunction cartesianToDegrees(cartesian) {\n  var carto = Ellipsoid.WGS84.cartesianToCartographic(cartesian);\n  return {\n    longitude: CesiumMath.toDegrees(carto.longitude),\n    latitude: CesiumMath.toDegrees(carto.latitude)\n  };\n}","function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.symbol.async-iterator.js\";\nimport \"core-js/modules/es.symbol.iterator.js\";\nimport \"core-js/modules/es.symbol.to-primitive.js\";\nimport \"core-js/modules/es.symbol.to-string-tag.js\";\nimport \"core-js/modules/es.array.for-each.js\";\nimport \"core-js/modules/es.array.from.js\";\nimport \"core-js/modules/es.array.reverse.js\";\nimport \"core-js/modules/es.array.slice.js\";\nimport \"core-js/modules/es.date.to-primitive.js\";\nimport \"core-js/modules/es.date.to-string.js\";\nimport \"core-js/modules/es.json.to-string-tag.js\";\nimport \"core-js/modules/es.math.to-string-tag.js\";\nimport \"core-js/modules/es.number.constructor.js\";\nimport \"core-js/modules/es.object.create.js\";\nimport \"core-js/modules/es.object.define-properties.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptor.js\";\nimport \"core-js/modules/es.object.get-own-property-descriptors.js\";\nimport \"core-js/modules/es.object.get-prototype-of.js\";\nimport \"core-js/modules/es.object.keys.js\";\nimport \"core-js/modules/es.object.set-prototype-of.js\";\nimport \"core-js/modules/es.regexp.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport _styled, { default as _styled2, default as _styled3, default as _styled4, default as _styled5, default as _styled6, default as _styled7, default as _styled8, default as _styled9 } from \"styled-components\";\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return e; }; var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function (t, e, r) { t[e] = r.value; }, i = \"function\" == typeof Symbol ? Symbol : {}, a = i.iterator || \"@@iterator\", c = i.asyncIterator || \"@@asyncIterator\", u = i.toStringTag || \"@@toStringTag\"; function define(t, e, r) { return Object.defineProperty(t, e, { value: r, enumerable: !0, configurable: !0, writable: !0 }), t[e]; } try { define({}, \"\"); } catch (t) { define = function define(t, e, r) { return t[e] = r; }; } function wrap(t, e, r, n) { var i = e && e.prototype instanceof Generator ? e : Generator, a = Object.create(i.prototype), c = new Context(n || []); return o(a, \"_invoke\", { value: makeInvokeMethod(t, r, c) }), a; } function tryCatch(t, e, r) { try { return { type: \"normal\", arg: t.call(e, r) }; } catch (t) { return { type: \"throw\", arg: t }; } } e.wrap = wrap; var h = \"suspendedStart\", l = \"suspendedYield\", f = \"executing\", s = \"completed\", y = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var p = {}; define(p, a, function () { return this; }); var d = Object.getPrototypeOf, v = d && d(d(values([]))); v && v !== r && n.call(v, a) && (p = v); var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p); function defineIteratorMethods(t) { [\"next\", \"throw\", \"return\"].forEach(function (e) { define(t, e, function (t) { return this._invoke(e, t); }); }); } function AsyncIterator(t, e) { function invoke(r, o, i, a) { var c = tryCatch(t[r], t, o); if (\"throw\" !== c.type) { var u = c.arg, h = u.value; return h && \"object\" == _typeof(h) && n.call(h, \"__await\") ? e.resolve(h.__await).then(function (t) { invoke(\"next\", t, i, a); }, function (t) { invoke(\"throw\", t, i, a); }) : e.resolve(h).then(function (t) { u.value = t, i(u); }, function (t) { return invoke(\"throw\", t, i, a); }); } a(c.arg); } var r; o(this, \"_invoke\", { value: function value(t, n) { function callInvokeWithMethodAndArg() { return new e(function (e, r) { invoke(t, n, e, r); }); } return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(e, r, n) { var o = h; return function (i, a) { if (o === f) throw Error(\"Generator is already running\"); if (o === s) { if (\"throw\" === i) throw a; return { value: t, done: !0 }; } for (n.method = i, n.arg = a;;) { var c = n.delegate; if (c) { var u = maybeInvokeDelegate(c, n); if (u) { if (u === y) continue; return u; } } if (\"next\" === n.method) n.sent = n._sent = n.arg;else if (\"throw\" === n.method) { if (o === h) throw o = s, n.arg; n.dispatchException(n.arg); } else \"return\" === n.method && n.abrupt(\"return\", n.arg); o = f; var p = tryCatch(e, r, n); if (\"normal\" === p.type) { if (o = n.done ? s : l, p.arg === y) continue; return { value: p.arg, done: n.done }; } \"throw\" === p.type && (o = s, n.method = \"throw\", n.arg = p.arg); } }; } function maybeInvokeDelegate(e, r) { var n = r.method, o = e.iterator[n]; if (o === t) return r.delegate = null, \"throw\" === n && e.iterator[\"return\"] && (r.method = \"return\", r.arg = t, maybeInvokeDelegate(e, r), \"throw\" === r.method) || \"return\" !== n && (r.method = \"throw\", r.arg = new TypeError(\"The iterator does not provide a '\" + n + \"' method\")), y; var i = tryCatch(o, e.iterator, r.arg); if (\"throw\" === i.type) return r.method = \"throw\", r.arg = i.arg, r.delegate = null, y; var a = i.arg; return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, \"return\" !== r.method && (r.method = \"next\", r.arg = t), r.delegate = null, y) : a : (r.method = \"throw\", r.arg = new TypeError(\"iterator result is not an object\"), r.delegate = null, y); } function pushTryEntry(t) { var e = { tryLoc: t[0] }; 1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e); } function resetTryEntry(t) { var e = t.completion || {}; e.type = \"normal\", delete e.arg, t.completion = e; } function Context(t) { this.tryEntries = [{ tryLoc: \"root\" }], t.forEach(pushTryEntry, this), this.reset(!0); } function values(e) { if (e || \"\" === e) { var r = e[a]; if (r) return r.call(e); if (\"function\" == typeof e.next) return e; if (!isNaN(e.length)) { var o = -1, i = function next() { for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next; return next.value = t, next.done = !0, next; }; return i.next = i; } } throw new TypeError(_typeof(e) + \" is not iterable\"); } return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), o(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, \"GeneratorFunction\"), e.isGeneratorFunction = function (t) { var e = \"function\" == typeof t && t.constructor; return !!e && (e === GeneratorFunction || \"GeneratorFunction\" === (e.displayName || e.name)); }, e.mark = function (t) { return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, \"GeneratorFunction\")), t.prototype = Object.create(g), t; }, e.awrap = function (t) { return { __await: t }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () { return this; }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) { void 0 === i && (i = Promise); var a = new AsyncIterator(wrap(t, r, n, o), i); return e.isGeneratorFunction(r) ? a : a.next().then(function (t) { return t.done ? t.value : a.next(); }); }, defineIteratorMethods(g), define(g, u, \"Generator\"), define(g, a, function () { return this; }), define(g, \"toString\", function () { return \"[object Generator]\"; }), e.keys = function (t) { var e = Object(t), r = []; for (var n in e) r.push(n); return r.reverse(), function next() { for (; r.length;) { var t = r.pop(); if (t in e) return next.value = t, next.done = !1, next; } return next.done = !0, next; }; }, e.values = values, Context.prototype = { constructor: Context, reset: function reset(e) { if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) \"t\" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t); }, stop: function stop() { this.done = !0; var t = this.tryEntries[0].completion; if (\"throw\" === t.type) throw t.arg; return this.rval; }, dispatchException: function dispatchException(e) { if (this.done) throw e; var r = this; function handle(n, o) { return a.type = \"throw\", a.arg = e, r.next = n, o && (r.method = \"next\", r.arg = t), !!o; } for (var o = this.tryEntries.length - 1; o >= 0; --o) { var i = this.tryEntries[o], a = i.completion; if (\"root\" === i.tryLoc) return handle(\"end\"); if (i.tryLoc <= this.prev) { var c = n.call(i, \"catchLoc\"), u = n.call(i, \"finallyLoc\"); if (c && u) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } else if (c) { if (this.prev < i.catchLoc) return handle(i.catchLoc, !0); } else { if (!u) throw Error(\"try statement without catch or finally\"); if (this.prev < i.finallyLoc) return handle(i.finallyLoc); } } } }, abrupt: function abrupt(t, e) { for (var r = this.tryEntries.length - 1; r >= 0; --r) { var o = this.tryEntries[r]; if (o.tryLoc <= this.prev && n.call(o, \"finallyLoc\") && this.prev < o.finallyLoc) { var i = o; break; } } i && (\"break\" === t || \"continue\" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null); var a = i ? i.completion : {}; return a.type = t, a.arg = e, i ? (this.method = \"next\", this.next = i.finallyLoc, y) : this.complete(a); }, complete: function complete(t, e) { if (\"throw\" === t.type) throw t.arg; return \"break\" === t.type || \"continue\" === t.type ? this.next = t.arg : \"return\" === t.type ? (this.rval = this.arg = t.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === t.type && e && (this.next = e), y; }, finish: function finish(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y; } }, \"catch\": function _catch(t) { for (var e = this.tryEntries.length - 1; e >= 0; --e) { var r = this.tryEntries[e]; if (r.tryLoc === t) { var n = r.completion; if (\"throw\" === n.type) { var o = n.arg; resetTryEntry(r); } return o; } } throw Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(e, r, n) { return this.delegate = { iterator: values(e), resultName: r, nextLoc: n }, \"next\" === this.method && (this.arg = t), y; } }, e; }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find.js\";\nimport \"core-js/modules/es.array.is-array.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.some.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.iterator.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nimport dateFormat from \"dateformat\";\nimport { runInAction } from \"mobx\";\nimport { observer } from \"mobx-react\";\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport styled, { useTheme } from \"styled-components\";\nimport Cartographic from \"terriajs-cesium/Source/Core/Cartographic\";\nimport JulianDate from \"terriajs-cesium/Source/Core/JulianDate\";\nimport CesiumMath from \"terriajs-cesium/Source/Core/Math\";\nimport createGuid from \"terriajs-cesium/Source/Core/createGuid\";\nimport SplitDirection from \"terriajs-cesium/Source/Scene/SplitDirection\";\nimport filterOutUndefined from \"../../../Core/filterOutUndefined\";\nimport isDefined from \"../../../Core/isDefined\";\nimport prettifyCoordinates from \"../../../Map/Vector/prettifyCoordinates\";\nimport DiffableMixin from \"../../../ModelMixins/DiffableMixin\";\nimport MappableMixin, { ImageryParts } from \"../../../ModelMixins/MappableMixin\";\nimport SplitItemReference from \"../../../Models/Catalog/CatalogReferences/SplitItemReference\";\nimport CommonStrata from \"../../../Models/Definition/CommonStrata\";\nimport hasTraits from \"../../../Models/Definition/hasTraits\";\nimport updateModelFromJson from \"../../../Models/Definition/updateModelFromJson\";\nimport { getMarkerLocation, removeMarker } from \"../../../Models/LocationMarkerUtils\";\nimport Box, { BoxSpan } from \"../../../Styled/Box\";\nimport Button, { RawButton } from \"../../../Styled/Button\";\nimport { GLYPHS, StyledIcon } from \"../../../Styled/Icon\";\nimport Select from \"../../../Styled/Select\";\nimport Spacing from \"../../../Styled/Spacing\";\nimport Text, { TextSpan } from \"../../../Styled/Text\";\nimport ImageryProviderTraits from \"../../../Traits/TraitsClasses/ImageryProviderTraits\";\nimport { useViewState } from \"../../Context\";\nimport { parseCustomMarkdownToReactWithOptions } from \"../../Custom/parseCustomMarkdownToReact\";\nimport Loader from \"../../Loader\";\nimport WorkflowPanel from \"../../Workflow/WorkflowPanel\";\nimport DatePicker from \"./DatePicker\";\nimport LocationPicker from \"./LocationPicker\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar DiffTool = observer(function (props) {\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    leftItem = _useState2[0],\n    setLeftItem = _useState2[1];\n  var _useState3 = useState(),\n    _useState4 = _slicedToArray(_useState3, 2),\n    rightItem = _useState4[0],\n    setRightItem = _useState4[1];\n  var _useState5 = useState(),\n    _useState6 = _slicedToArray(_useState5, 2),\n    userSelectedSourceItem = _useState6[0],\n    setUserSelectedSourceItem = _useState6[1];\n  var viewState = useViewState();\n  var changeSourceItem = function changeSourceItem(sourceItem) {\n    setUserSelectedSourceItem(sourceItem);\n  };\n  var sourceItem = useMemo(function () {\n    return userSelectedSourceItem || props.sourceItem;\n  }, [props.sourceItem, userSelectedSourceItem]);\n  useEffect(function () {\n    var terria = viewState.terria;\n    var originalSettings = {\n      showSplitter: terria.showSplitter,\n      isMapFullScreen: viewState.isMapFullScreen\n    };\n    runInAction(function () {\n      terria.showSplitter = true;\n      sourceItem.setTrait(CommonStrata.user, \"show\", false);\n      terria.elements.set(\"timeline\", {\n        visible: false\n      });\n    });\n    var itemsPromise = Promise.all([createSplitItem(sourceItem, SplitDirection.LEFT), createSplitItem(sourceItem, SplitDirection.RIGHT)]);\n    itemsPromise.then(function (_ref) {\n      var _ref2 = _slicedToArray(_ref, 2),\n        lItem = _ref2[0],\n        rItem = _ref2[1];\n      setLeftItem(lItem);\n      setRightItem(rItem);\n    })[\"catch\"]();\n    return function () {\n      runInAction(function () {\n        terria.showSplitter = originalSettings.showSplitter;\n        viewState.setIsMapFullScreen(originalSettings.isMapFullScreen);\n        sourceItem.setTrait(CommonStrata.user, \"show\", true);\n        terria.elements.set(\"timeline\", {\n          visible: true\n        });\n      });\n      itemsPromise.then(function (_ref3) {\n        var _ref4 = _slicedToArray(_ref3, 2),\n          lItem = _ref4[0],\n          rItem = _ref4[1];\n        if (lItem) removeSplitItem(lItem);\n        if (rItem) removeSplitItem(rItem);\n      });\n    };\n  }, [sourceItem, viewState]);\n  if (leftItem && rightItem) {\n    return /*#__PURE__*/_jsx(Main, _objectSpread(_objectSpread({}, props), {}, {\n      terria: props.viewState.terria,\n      sourceItem: sourceItem,\n      changeSourceItem: changeSourceItem,\n      leftItem: leftItem,\n      rightItem: rightItem\n    }));\n  }\n  return null;\n});\nDiffTool.displayName = \"DiffTool\";\nvar Main = observer(function (props) {\n  var _diffItem$styleSelect3;\n  var terria = props.terria,\n    viewState = props.viewState,\n    sourceItem = props.sourceItem,\n    leftItem = props.leftItem,\n    rightItem = props.rightItem;\n  var _useTranslation = useTranslation(),\n    t = _useTranslation.t;\n  var theme = useTheme();\n  var _useState7 = useState(),\n    _useState8 = _slicedToArray(_useState7, 2),\n    location = _useState8[0],\n    setLocation = _useState8[1];\n  var _useState9 = useState(false),\n    _useState10 = _slicedToArray(_useState9, 2),\n    setLocationPickError = _useState10[1];\n  var _useState11 = useState(false),\n    _useState12 = _slicedToArray(_useState11, 2),\n    isPickingNewLocation = _useState12[0],\n    setIsPickingNewLocation = _useState12[1];\n  var leftDatePickerHandle = useRef(null);\n  var rightDatePickerHandle = useRef(null);\n  var diffItem = useMemo(function () {\n    return leftItem;\n  }, [leftItem]);\n  var currentLeftDate = useMemo(function () {\n    return leftItem.currentDiscreteJulianDate;\n  }, [leftItem.currentDiscreteJulianDate]);\n  var currentRightDate = useMemo(function () {\n    return rightItem.currentDiscreteJulianDate;\n  }, [rightItem.currentDiscreteJulianDate]);\n  var diffItemName = useMemo(function () {\n    var name = sourceItem.name || \"\";\n    var format = \"yyyy/mm/dd\";\n    if (!currentLeftDate || !currentRightDate) {\n      return name;\n    } else {\n      var d1 = dateFormat(JulianDate.toDate(currentLeftDate), format);\n      var d2 = dateFormat(JulianDate.toDate(currentRightDate), format);\n      return \"\".concat(name, \" - difference for dates \").concat(d1, \", \").concat(d2);\n    }\n  }, [currentLeftDate, currentRightDate, sourceItem.name]);\n  var diffableItemsInWorkbench = useMemo(function () {\n    return terria.workbench.items.filter(function (item) {\n      return DiffableMixin.isMixedInto(item) && item.canDiffImages;\n    });\n  }, [terria.workbench.items]);\n  var previewStyle = useMemo(function () {\n    var _diffItem$styleSelect;\n    return (_diffItem$styleSelect = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect === void 0 || (_diffItem$styleSelect = _diffItem$styleSelect[0]) === null || _diffItem$styleSelect === void 0 ? void 0 : _diffItem$styleSelect.selectedId;\n  }, [diffItem.styleSelectableDimensions]);\n  var currentDiffStyle = useMemo(function () {\n    return diffItem.diffStyleId;\n  }, [diffItem.diffStyleId]);\n  var availableDiffStyles = useMemo(function () {\n    return filterOutUndefined(diffItem.availableDiffStyles.map(function (diffStyleId) {\n      var _diffItem$styleSelect2;\n      return (_diffItem$styleSelect2 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2[0]) === null || _diffItem$styleSelect2 === void 0 || (_diffItem$styleSelect2 = _diffItem$styleSelect2.options) === null || _diffItem$styleSelect2 === void 0 ? void 0 : _diffItem$styleSelect2.find(function (style) {\n        return style.id === diffStyleId;\n      });\n    }));\n  }, [diffItem.availableDiffStyles, diffItem.styleSelectableDimensions]);\n  var diffLegendUrl = useMemo(function () {\n    return currentDiffStyle && currentLeftDate && currentRightDate && diffItem.getLegendUrlForStyle(currentDiffStyle, currentLeftDate, currentRightDate);\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem]);\n  var previewLegendUrl = useMemo(function () {\n    return previewStyle && diffItem.getLegendUrlForStyle(previewStyle);\n  }, [previewStyle, diffItem]);\n  var showItem = useCallback(function (model) {\n    runInAction(function () {\n      if (hasOpacity(model)) {\n        model.setTrait(CommonStrata.user, \"opacity\", 0.8);\n      }\n    });\n  }, []);\n  var hideItem = useCallback(function (model) {\n    runInAction(function () {\n      if (hasOpacity(model)) {\n        model.setTrait(CommonStrata.user, \"opacity\", 0);\n      }\n    });\n  }, []);\n  var handleChangeSourceItem = useCallback(function (e) {\n    var newSourceItem = diffableItemsInWorkbench.find(function (item) {\n      return item.uniqueId === e.target.value;\n    });\n    if (newSourceItem) props.changeSourceItem(newSourceItem);\n  }, [diffableItemsInWorkbench, props]);\n  var handleChangePreviewStyle = useCallback(function (e) {\n    var styleId = e.target.value;\n    runInAction(function () {\n      var _leftItem$styleSelect, _rightItem$styleSelec;\n      (_leftItem$styleSelect = leftItem.styleSelectableDimensions) === null || _leftItem$styleSelect === void 0 || (_leftItem$styleSelect = _leftItem$styleSelect[0]) === null || _leftItem$styleSelect === void 0 || _leftItem$styleSelect.setDimensionValue(CommonStrata.user, styleId);\n      (_rightItem$styleSelec = rightItem.styleSelectableDimensions) === null || _rightItem$styleSelec === void 0 || (_rightItem$styleSelec = _rightItem$styleSelec[0]) === null || _rightItem$styleSelec === void 0 || _rightItem$styleSelec.setDimensionValue(CommonStrata.user, styleId);\n    });\n  }, [leftItem.styleSelectableDimensions, rightItem.styleSelectableDimensions]);\n  var handleChangeDiffStyle = useCallback(function (e) {\n    runInAction(function () {\n      diffItem.setTrait(CommonStrata.user, \"diffStyleId\", e.target.value);\n    });\n  }, [diffItem]);\n  var onUserPickingLocation = useCallback(function (_pickingLocation) {\n    setIsPickingNewLocation(true);\n  }, []);\n  var onUserPickLocation = useCallback(function (pickedFeatures, pickedLocationValue) {\n    var feature = pickedFeatures.features.find(function (f) {\n      return doesFeatureBelongToItem(f, leftItem) || doesFeatureBelongToItem(f, rightItem);\n    });\n    runInAction(function () {\n      if (feature) {\n        leftItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        rightItem.setTimeFilterFeature(feature, pickedFeatures.providerCoords);\n        setLocation(pickedLocationValue);\n        setLocationPickError(false);\n      } else {\n        setLocationPickError(true);\n      }\n      setIsPickingNewLocation(false);\n    });\n  }, [leftItem, rightItem]);\n  var unsetDates = useCallback(function () {\n    runInAction(function () {\n      leftItem.setTrait(CommonStrata.user, \"currentTime\", null);\n      rightItem.setTrait(CommonStrata.user, \"currentTime\", null);\n    });\n    hideItem(leftItem);\n    hideItem(rightItem);\n  }, [leftItem, rightItem, hideItem]);\n  var generateDiff = useCallback(function () {\n    if (currentLeftDate === undefined || currentRightDate === undefined || currentDiffStyle === undefined) {\n      return;\n    }\n    runInAction(function () {\n      terria.overlays.remove(leftItem);\n      terria.overlays.remove(rightItem);\n      terria.workbench.add(diffItem);\n      diffItem.setTrait(CommonStrata.user, \"name\", diffItemName);\n      diffItem.showDiffImage(currentLeftDate, currentRightDate, currentDiffStyle);\n      var diffItemProperties = diffItem.diffItemProperties;\n      if (diffItemProperties) {\n        updateModelFromJson(diffItem, CommonStrata.user, diffItemProperties);\n      }\n      terria.showSplitter = false;\n    });\n  }, [currentDiffStyle, currentLeftDate, currentRightDate, diffItem, diffItemName, leftItem, rightItem, terria]);\n  var resetTool = useCallback(function () {\n    runInAction(function () {\n      diffItem.clearDiffImage();\n      setDefaultDiffStyle(diffItem);\n      terria.overlays.add(leftItem);\n      terria.overlays.add(rightItem);\n      terria.workbench.remove(diffItem);\n      terria.showSplitter = true;\n      leftItem.setTrait(CommonStrata.user, \"splitDirection\", SplitDirection.LEFT);\n      rightItem.setTrait(CommonStrata.user, \"splitDirection\", SplitDirection.RIGHT);\n    });\n  }, [diffItem, leftItem, rightItem, terria]);\n  var setLocationFromActiveSearch = useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n    var markerLocation, part, imageryProvider, promises, someSuccessful;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          markerLocation = getMarkerLocation(terria);\n          if (!(markerLocation && MappableMixin.isMixedInto(sourceItem))) {\n            _context.next = 10;\n            break;\n          }\n          part = sourceItem.mapItems.find(function (p) {\n            return ImageryParts.is(p);\n          });\n          imageryProvider = part && ImageryParts.is(part) && part.imageryProvider;\n          if (!imageryProvider) {\n            _context.next = 10;\n            break;\n          }\n          promises = [setTimeFilterFromLocation(leftItem, markerLocation, imageryProvider), setTimeFilterFromLocation(rightItem, markerLocation, imageryProvider)];\n          _context.next = 8;\n          return Promise.all(promises);\n        case 8:\n          someSuccessful = _context.sent.some(function (ok) {\n            return ok;\n          });\n          if (someSuccessful) {\n            runInAction(function () {\n              return setLocation(markerLocation);\n            });\n          } else {\n            // If we cannot resolve imagery at the marker location, remove it\n            runInAction(function () {\n              return removeMarker(terria);\n            });\n          }\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  })), [leftItem, rightItem, sourceItem, terria]);\n  useEffect(function () {\n    var _diffItem$timeFilterC = diffItem.timeFilterCoordinates,\n      latitude = _diffItem$timeFilterC.latitude,\n      longitude = _diffItem$timeFilterC.longitude,\n      height = _diffItem$timeFilterC.height;\n    if (latitude !== undefined && longitude !== undefined) {\n      setLocation({\n        latitude: latitude,\n        longitude: longitude,\n        height: height\n      });\n      // Assuming removeMarker is an action or handles its own MobX transactions\n      removeMarker(terria);\n    } else {\n      setLocationFromActiveSearch();\n    }\n  }, [diffItem.timeFilterCoordinates, setLocationFromActiveSearch, terria]);\n  var closePanel = useCallback(function () {\n    viewState.closeTool();\n  }, [viewState]);\n  var isShowingDiff = diffItem.isShowingDiff;\n  var datesSelected = currentLeftDate && currentRightDate;\n  var isReadyToGenerateDiff = location && datesSelected && currentDiffStyle !== undefined;\n  return /*#__PURE__*/_jsx(WorkflowPanel, {\n    viewState: viewState,\n    title: t(\"diffTool.title\"),\n    icon: GLYPHS.difference,\n    onClose: function onClose() {\n      resetTool();\n      closePanel();\n    },\n    children: /*#__PURE__*/_jsxs(_StyledDiv, {\n      children: [isShowingDiff && /*#__PURE__*/_jsx(Text, {\n        medium: true,\n        textLight: true,\n        children: t(\"diffTool.differenceResultsTitle\")\n      }), /*#__PURE__*/_jsx(Text, {\n        textLight: true,\n        children: t(\"diffTool.instructions.paneDescription\")\n      }), /*#__PURE__*/_jsx(Group, {\n        children: /*#__PURE__*/_jsxs(LocationAndDatesDisplayBox, {\n          children: [/*#__PURE__*/_jsxs(Box, {\n            children: [/*#__PURE__*/_jsxs(Text, {\n              medium: true,\n              children: [t(\"diffTool.labels.area\"), \":\"]\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              children: [/*#__PURE__*/_jsx(Text, {\n                bold: true,\n                textLight: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.title\") : t(\"diffTool.locationDisplay.noLocationSelected.title\")\n              }), /*#__PURE__*/_jsx(Text, {\n                light: true,\n                textLight: true,\n                small: true,\n                children: location ? t(\"diffTool.locationDisplay.locationSelected.description\") : t(\"diffTool.locationDisplay.noLocationSelected.description\")\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(Box, {\n            children: [/*#__PURE__*/_jsxs(Text, {\n              medium: true,\n              children: [t(\"diffTool.labels.dates\"), \":\"]\n            }), /*#__PURE__*/_jsxs(Box, {\n              column: true,\n              alignItemsFlexStart: true,\n              children: [currentLeftDate && /*#__PURE__*/_jsxs(Text, {\n                large: true,\n                children: [\"(A)\", \" \", dateFormat(JulianDate.toDate(currentLeftDate), \"dd/mm/yyyy\")]\n              }), !currentLeftDate && /*#__PURE__*/_jsx(RawButton, {\n                onClick: function onClick() {\n                  var _leftDatePickerHandle;\n                  return (_leftDatePickerHandle = leftDatePickerHandle.current) === null || _leftDatePickerHandle === void 0 ? void 0 : _leftDatePickerHandle.open();\n                },\n                children: /*#__PURE__*/_jsx(TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateA\")\n                })\n              }), currentRightDate && /*#__PURE__*/_jsxs(Text, {\n                large: true,\n                children: [\"(B)\", \" \", dateFormat(JulianDate.toDate(currentRightDate), \"dd/mm/yyyy\")]\n              }), !currentRightDate && /*#__PURE__*/_jsx(RawButton, {\n                onClick: function onClick() {\n                  var _rightDatePickerHandl;\n                  return (_rightDatePickerHandl = rightDatePickerHandle.current) === null || _rightDatePickerHandl === void 0 ? void 0 : _rightDatePickerHandl.open();\n                },\n                children: /*#__PURE__*/_jsx(TextSpan, {\n                  isLink: true,\n                  small: true,\n                  bold: true,\n                  children: t(\"diffTool.instructions.setDateB\")\n                })\n              }), isShowingDiff === false && currentLeftDate && currentRightDate && /*#__PURE__*/_jsx(RawButton, {\n                onClick: unsetDates,\n                children: /*#__PURE__*/_jsx(TextSpan, {\n                  isLink: true,\n                  small: true,\n                  children: t(\"diffTool.instructions.changeDates\")\n                })\n              })]\n            })]\n          })]\n        })\n      }), !isShowingDiff && /*#__PURE__*/_jsx(Group, {\n        children: /*#__PURE__*/_jsxs(Selector, {\n          viewState: viewState,\n          value: sourceItem.uniqueId,\n          onChange: handleChangeSourceItem,\n          label: t(\"diffTool.labels.sourceDataset\"),\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            disabled: true,\n            children: \"Select source item\"\n          }), diffableItemsInWorkbench.map(function (item) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: item.uniqueId,\n              children: item.name\n            }, item.uniqueId);\n          })]\n        })\n      }), !isShowingDiff && /*#__PURE__*/_jsxs(Group, {\n        children: [/*#__PURE__*/_jsxs(Selector, {\n          viewState: viewState,\n          spacingBottom: true,\n          value: previewStyle,\n          onChange: handleChangePreviewStyle,\n          label: t(\"diffTool.labels.previewStyle\"),\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.choosePreview\")\n          }), (_diffItem$styleSelect3 = diffItem.styleSelectableDimensions) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3[0]) === null || _diffItem$styleSelect3 === void 0 || (_diffItem$styleSelect3 = _diffItem$styleSelect3.options) === null || _diffItem$styleSelect3 === void 0 ? void 0 : _diffItem$styleSelect3.map(function (style) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: style.id,\n              children: style.name\n            }, style.id);\n          })]\n        }), previewLegendUrl && /*#__PURE__*/_jsx(LegendImage, {\n          width: \"100%\",\n          src: previewLegendUrl\n        })]\n      }), /*#__PURE__*/_jsxs(Group, {\n        children: [/*#__PURE__*/_jsxs(Selector, {\n          viewState: viewState,\n          value: currentDiffStyle || \"\",\n          onChange: handleChangeDiffStyle,\n          label: t(\"diffTool.labels.differenceOutput\"),\n          children: [/*#__PURE__*/_jsx(\"option\", {\n            disabled: true,\n            value: \"\",\n            children: t(\"diffTool.chooseDifference\")\n          }), availableDiffStyles.map(function (style) {\n            return /*#__PURE__*/_jsx(\"option\", {\n              value: style.id,\n              children: style.name\n            }, style.id);\n          })]\n        }), isShowingDiff && diffLegendUrl && /*#__PURE__*/_jsx(LegendImage, {\n          width: \"100%\",\n          src: diffLegendUrl\n        })]\n      }), !isShowingDiff && /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(GenerateButton, {\n          onClick: generateDiff,\n          disabled: !isReadyToGenerateDiff,\n          \"aria-describedby\": \"TJSDifferenceDisabledButtonPrompt\",\n          children: /*#__PURE__*/_jsx(TextSpan, {\n            large: true,\n            children: t(\"diffTool.labels.generateDiffButtonText\")\n          })\n        }), !isReadyToGenerateDiff && /*#__PURE__*/_jsxs(_StyledDiv2, {\n          children: [/*#__PURE__*/_jsx(_StyledDiv3, {\n            children: /*#__PURE__*/_jsx(StyledIcon, {\n              fillColor: \"#ccc\",\n              styledWidth: \"16px\",\n              styledHeight: \"16px\",\n              glyph: GLYPHS.info\n            })\n          }), /*#__PURE__*/_jsx(Text, {\n            small: true,\n            light: true,\n            textLight: true,\n            id: \"TJSDifferenceDisabledButtonPrompt\",\n            children: t(\"diffTool.labels.disabledButtonPrompt\")\n          })]\n        })]\n      }), isShowingDiff && /*#__PURE__*/_jsxs(Box, {\n        centered: true,\n        left: true,\n        children: [/*#__PURE__*/_jsx(_StyledBackButton, {\n          transparentBg: true,\n          onClick: resetTool,\n          $_css: theme.textLight,\n          $_css2: theme.textLight,\n          children: /*#__PURE__*/_jsxs(BoxSpan, {\n            centered: true,\n            children: [/*#__PURE__*/_jsx(_StyledStyledIcon, {\n              light: true,\n              styledWidth: \"16px\",\n              glyph: GLYPHS.arrowDown\n            }), /*#__PURE__*/_jsx(TextSpan, {\n              medium: true,\n              children: t(\"general.back\")\n            })]\n          })\n        }), /*#__PURE__*/_jsx(_StyledButton, {\n          primary: true,\n          onClick: closePanel,\n          children: /*#__PURE__*/_jsx(TextSpan, {\n            medium: true,\n            children: t(\"diffTool.labels.saveToWorkbench\")\n          })\n        })]\n      }), !isShowingDiff && /*#__PURE__*/_jsx(LocationPicker, {\n        terria: terria,\n        location: location,\n        onPicking: onUserPickingLocation,\n        onPicked: onUserPickLocation\n      }), !isShowingDiff && /*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsxs(Box, {\n        centered: true,\n        fullWidth: true,\n        flexWrap: true,\n        backgroundColor: theme.dark,\n        children: [/*#__PURE__*/_jsx(DatePicker, {\n          ref: leftDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonA\"),\n          item: leftItem,\n          onDateSet: function onDateSet() {\n            return showItem(leftItem);\n          }\n        }), /*#__PURE__*/_jsx(AreaFilterSelection, {\n          location: location,\n          isPickingNewLocation: isPickingNewLocation\n        }), /*#__PURE__*/_jsx(DatePicker, {\n          ref: rightDatePickerHandle,\n          heading: t(\"diffTool.labels.dateComparisonB\"),\n          item: rightItem,\n          onDateSet: function onDateSet() {\n            return showItem(rightItem);\n          }\n        })]\n      }), document.getElementById(\"TJS-BottomDockLastPortal\"))]\n    })\n  });\n});\nMain.displayName = \"Main\";\nvar BackButton = styled(Button).attrs({\n  secondary: true\n}).withConfig({\n  displayName: \"DiffTool__BackButton\",\n  componentId: \"sc-3vyhxu-0\"\n})([\"\"]);\nvar _StyledBackButton = styled(BackButton).withConfig({\n  displayName: \"DiffTool___StyledBackButton\",\n  componentId: \"sc-3vyhxu-1\"\n})([\"color:\", \";border-color:\", \";\"], function (p) {\n  return p.$_css;\n}, function (p) {\n  return p.$_css2;\n});\nvar GenerateButton = styled(Button).attrs({\n  primary: true,\n  fullWidth: true\n}).withConfig({\n  displayName: \"DiffTool__GenerateButton\",\n  componentId: \"sc-3vyhxu-2\"\n})([\"\"]);\nvar Selector = function Selector(props) {\n  return /*#__PURE__*/_jsx(Box, {\n    fullWidth: true,\n    column: true,\n    children: /*#__PURE__*/_jsxs(\"label\", {\n      children: [/*#__PURE__*/_jsx(_StyledText, {\n        textLight: true,\n        $_css3: \"p {margin: 0;}\",\n        children: parseCustomMarkdownToReactWithOptions(\"\".concat(props.label, \":\"), {\n          injectTermsAsTooltips: true,\n          tooltipTerms: props.viewState.terria.configParameters.helpContentTerms\n        })\n      }), /*#__PURE__*/_jsx(Spacing, {\n        bottom: 1\n      }), /*#__PURE__*/_jsx(Select, _objectSpread(_objectSpread({}, props), {}, {\n        children: props.children\n      })), props.spacingBottom && /*#__PURE__*/_jsx(Spacing, {\n        bottom: 2\n      })]\n    })\n  });\n};\nvar AreaFilterSelection = function AreaFilterSelection(props) {\n  var location = props.location,\n    isPickingNewLocation = props.isPickingNewLocation;\n  var _useTranslation2 = useTranslation(),\n    t = _useTranslation2.t;\n  var locationText = \"-\";\n  if (location) {\n    var _prettifyCoordinates = prettifyCoordinates(location.longitude, location.latitude, {\n        digits: 2\n      }),\n      longitude = _prettifyCoordinates.longitude,\n      latitude = _prettifyCoordinates.latitude;\n    locationText = \"\".concat(longitude, \" \").concat(latitude);\n  }\n  return /*#__PURE__*/_jsxs(_StyledBox, {\n    column: true,\n    centered: true,\n    styledMinWidth: \"230px\",\n    children: [/*#__PURE__*/_jsxs(Box, {\n      centered: true,\n      children: [/*#__PURE__*/_jsx(StyledIcon, {\n        light: true,\n        styledWidth: \"16px\",\n        glyph: GLYPHS.location2\n      }), /*#__PURE__*/_jsx(Spacing, {\n        right: 2\n      }), /*#__PURE__*/_jsx(Text, {\n        textLight: true,\n        extraLarge: true,\n        children: t(\"diffTool.labels.areaFilterSelection\")\n      })]\n    }), /*#__PURE__*/_jsx(Spacing, {\n      bottom: 3\n    }), /*#__PURE__*/_jsx(Box, {\n      styledMinHeight: \"40px\",\n      children: isPickingNewLocation ? /*#__PURE__*/_jsx(_StyledText2, {\n        textLight: true,\n        extraExtraLarge: true,\n        bold: true\n        // Using legacy Loader.jsx means we override at a higher level to inherit\n        // this fills tyle\n        ,\n        children: /*#__PURE__*/_jsx(Loader, {\n          light: true,\n          message: \"Querying \".concat(location ? \"new\" : \"\", \" position...\")\n        })\n      }) : /*#__PURE__*/_jsx(Text, {\n        textLight: true,\n        bold: true,\n        heading: true,\n        textAlignCenter: true,\n        children: locationText\n      })\n    })]\n  });\n};\nvar Group = styled.div.withConfig({\n  displayName: \"DiffTool__Group\",\n  componentId: \"sc-3vyhxu-3\"\n})([\"background-color:\", \";padding:15px;border-radius:5px;\"], function (p) {\n  return p.theme.darkWithOverlay;\n});\nvar LocationAndDatesDisplayBox = styled(Box).attrs({\n  column: true\n}).withConfig({\n  displayName: \"DiffTool__LocationAndDatesDisplayBox\",\n  componentId: \"sc-3vyhxu-4\"\n})([\"color:\", \";padding:15px;> \", \":first-child{margin-bottom:13px;}> div > div:first-child{margin-right:5px;min-width:50px;}\"], function (p) {\n  return p.theme.textLight;\n}, Box);\nvar LegendImage = function LegendImage(props) {\n  return /*#__PURE__*/_jsx(\"img\", _objectSpread(_objectSpread({}, props), {}, {\n    // Show the legend only if it loads successfully, so we start out hidden\n    style: {\n      display: \"none\",\n      marginTop: \"10px\"\n    },\n    onLoad: function onLoad(e) {\n      return e.currentTarget.style.display = \"block\";\n    },\n    onError: function onError(e) {\n      return e.currentTarget.style.display = \"none\";\n    }\n  }));\n};\nfunction createSplitItem(_x, _x2) {\n  return _createSplitItem.apply(this, arguments);\n}\n/**\n * If the item has only one available diff style, auto-select it\n */\nfunction _createSplitItem() {\n  _createSplitItem = _asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(sourceItem, splitDirection) {\n    var terria, ref;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          terria = sourceItem.terria;\n          ref = new SplitItemReference(createGuid(), terria);\n          ref.setTrait(CommonStrata.user, \"splitSourceItemId\", sourceItem.uniqueId);\n          terria.addModel(ref);\n          _context2.next = 6;\n          return ref.loadReference();\n        case 6:\n          return _context2.abrupt(\"return\", runInAction(function () {\n            var _newItem$styleSelecta;\n            if (ref.target === undefined) {\n              throw Error(\"failed to split item\");\n            }\n            var newItem = ref.target;\n            newItem.setTrait(CommonStrata.user, \"show\", true);\n            newItem.setTrait(CommonStrata.user, \"splitDirection\", splitDirection);\n            newItem.setTrait(CommonStrata.user, \"currentTime\", null);\n            newItem.setTrait(CommonStrata.user, \"initialTimeSource\", \"none\");\n            if (hasOpacity(newItem)) {\n              // We want to show the item on the map only after date selection. At the\n              // same time we cannot set `show` to false because if we\n              // do so, date picking which relies on feature picking, will not work. So\n              // we simply set the opacity of the item to 0.\n              newItem.setTrait(CommonStrata.user, \"opacity\", 0);\n            }\n\n            // Override feature info template as the parent featureInfoTemplate might\n            // not be relevant for the difference item. This has to be done in the user\n            // stratum to override template set in definition stratum.\n            updateModelFromJson(newItem, CommonStrata.user, {\n              featureInfoTemplate: {\n                template: \"\"\n              }\n            });\n            setDefaultDiffStyle(newItem);\n\n            // Set the default style to true color style if it exists\n            var trueColor = (_newItem$styleSelecta = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta[0]) === null || _newItem$styleSelecta === void 0 || (_newItem$styleSelecta = _newItem$styleSelecta.options) === null || _newItem$styleSelecta === void 0 ? void 0 : _newItem$styleSelecta.find(function (style) {\n              return isDefined(style.name) && style.name.search(/true/i) >= 0;\n            });\n            if (trueColor !== null && trueColor !== void 0 && trueColor.id) {\n              var _newItem$styleSelecta2;\n              (_newItem$styleSelecta2 = newItem.styleSelectableDimensions) === null || _newItem$styleSelecta2 === void 0 || (_newItem$styleSelecta2 = _newItem$styleSelecta2[0]) === null || _newItem$styleSelecta2 === void 0 || _newItem$styleSelecta2.setDimensionValue(CommonStrata.user, trueColor.id);\n            }\n            terria.overlays.add(newItem);\n            return newItem;\n          }));\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _createSplitItem.apply(this, arguments);\n}\nfunction setDefaultDiffStyle(item) {\n  if (item.diffStyleId !== undefined) {\n    return;\n  }\n  var availableStyles = filterOutUndefined(item.availableDiffStyles.map(function (diffStyleId) {\n    var _item$styleSelectable;\n    return (_item$styleSelectable = item.styleSelectableDimensions) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable[0]) === null || _item$styleSelectable === void 0 || (_item$styleSelectable = _item$styleSelectable.options) === null || _item$styleSelectable === void 0 ? void 0 : _item$styleSelectable.find(function (style) {\n      return style.id === diffStyleId;\n    });\n  }));\n  if (availableStyles.length === 1) {\n    item.setTrait(CommonStrata.user, \"diffStyleId\", availableStyles[0].id);\n  }\n}\nfunction removeSplitItem(item) {\n  var terria = item.terria;\n  terria.overlays.remove(item);\n  if (item.sourceReference && terria.workbench.contains(item) === false) {\n    terria.removeModelReferences(item.sourceReference);\n  }\n}\nfunction doesFeatureBelongToItem(feature, item) {\n  var _feature$imageryLayer;\n  if (!MappableMixin.isMixedInto(item)) return false;\n  var imageryProvider = (_feature$imageryLayer = feature.imageryLayer) === null || _feature$imageryLayer === void 0 ? void 0 : _feature$imageryLayer.imageryProvider;\n  if (imageryProvider === undefined) return false;\n  return item.mapItems.find(function (m) {\n    return ImageryParts.is(m) && m.imageryProvider === imageryProvider;\n  }) !== undefined;\n}\nfunction setTimeFilterFromLocation(item, location, im) {\n  var carto = new Cartographic(CesiumMath.toRadians(location.longitude), CesiumMath.toRadians(location.latitude));\n  // We just need to set this to a high enough level supported by the service\n  var level = 30;\n  var tile = im.tilingScheme.positionToTileXY(carto, level);\n  return item.setTimeFilterFromLocation({\n    position: {\n      latitude: location.latitude,\n      longitude: location.longitude,\n      height: location.height\n    },\n    tileCoords: {\n      x: tile.x,\n      y: tile.y,\n      level: level\n    }\n  });\n}\nfunction hasOpacity(model) {\n  return hasTraits(model, ImageryProviderTraits, \"opacity\");\n}\nexport default DiffTool;\nvar _StyledDiv = styled(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv\",\n  componentId: \"sc-3vyhxu-5\"\n})([\"display:flex;flex-direction:column;height:100%;padding:15px;gap:20px;\"]);\nvar _StyledDiv2 = styled(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv2\",\n  componentId: \"sc-3vyhxu-6\"\n})([\"display:flex;flex-direction:row;padding:5px;\"]);\nvar _StyledDiv3 = styled(\"div\").withConfig({\n  displayName: \"DiffTool___StyledDiv3\",\n  componentId: \"sc-3vyhxu-7\"\n})([\"margin-right:10px;\"]);\nvar _StyledStyledIcon = styled(StyledIcon).withConfig({\n  displayName: \"DiffTool___StyledStyledIcon\",\n  componentId: \"sc-3vyhxu-8\"\n})([\"transform:rotate(90deg);\"]);\nvar _StyledButton = styled(Button).withConfig({\n  displayName: \"DiffTool___StyledButton\",\n  componentId: \"sc-3vyhxu-9\"\n})([\"flex-grow:1;margin-left:10px;\"]);\nvar _StyledText = styled(Text).withConfig({\n  displayName: \"DiffTool___StyledText\",\n  componentId: \"sc-3vyhxu-10\"\n})([\"\", \"\"], function (p) {\n  return p.$_css3;\n});\nvar _StyledBox = styled(Box).withConfig({\n  displayName: \"DiffTool___StyledBox\",\n  componentId: \"sc-3vyhxu-11\"\n})([\"@media (max-width:\", \"px){width:100%;}\"], function (props) {\n  return props.theme.md;\n});\nvar _StyledText2 = styled(Text).withConfig({\n  displayName: \"DiffTool___StyledText2\",\n  componentId: \"sc-3vyhxu-12\"\n})([\"fill:\", \";\"], function (_ref6) {\n  var theme = _ref6.theme;\n  return theme.textLight;\n});"],"names":["_arrayLikeToArray","r","a","length","e","n","Array","DatePicker","forwardRef","props","ref","heading","item","onDateSet","t","useTranslation","_useState2","useState","isArray","_arrayWithHoles","l","Symbol","iterator","i","u","f","o","call","next","Object","done","push","value","_iterableToArrayLimit","toString","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","isOpen","setIsOpen","currentDate","useMemo","date","currentDiscreteJulianDate","JulianDate","toDate","formattedCurrentDate","undefined","toggleOpen","useCallback","changeCurrentDate","setTrait","CommonStrata","user","toISOString","moveToPreviousDate","moveToPreviousDiscreteTime","moveToNextDate","moveToNextDiscreteTime","useImperativeHandle","open","close","Box","column","centered","flex","children","Spacing","bottom","_StyledStyledIcon","light","styledWidth","glyph","Icon","calendar2","$_css","right","Text","textLight","extraLarge","PrevButton","disabled","isPreviousDiscreteTimeAvailable","title","onClick","DateButton","primary","NextButton","isNextDiscreteTimeAvailable","style","display","position","DateTimePicker","dates","objectifiedDates","onChange","openDirection","onClose","displayName","PagerButton","Button","attrs","iconProps","css","withConfig","componentId","theme","colorPrimary","_ref","centerWithFlex","renderIcon","_StyledStyledIcon2","arrowDown","_ref2","borderRadiusLeft","radius40Button","_StyledStyledIcon3","_ref3","borderRadiusRight","lg","_class","_class2","_descriptor","_descriptor2","_descriptor3","p","_typeof","prototype","_initializerDefineProperty","defineProperty","enumerable","configurable","writable","initializer","_defineProperties","_toPropertyKey","key","_isNativeReflectConstruct","Boolean","valueOf","Reflect","construct","_getPrototypeOf","setPrototypeOf","getPrototypeOf","bind","__proto__","_setPrototypeOf","toPrimitive","String","_toPrimitive","_applyDecoratedDescriptor","keys","forEach","reverse","reduce","LocationPicker","_Component","_this","_classCallCheck","this","ReferenceError","_assertThisInitialized","_possibleConstructorReturn","apply","_callSuper","create","_inherits","_this2","_this$props","terria","location","onPicking","onPicked","pickMode","MapInteractionMode","message","messageAsNode","uiMode","Difference","mode","mapInteractionModeStack","addInteractionModeToMap","showMarker","pickDisposer","pickedFeatures","newPick","_newPick$allFeaturesA","pickPosition","customUi","Loader","concat","cartesian","carto","Ellipsoid","WGS84","cartesianToCartographic","longitude","toDegrees","latitude","currentPick","allFeaturesAvailablePromise","then","_this$pickDisposer","pop","removeInteractionModeFromMap","setupPicker","destroyPicker","Component","getOwnPropertyDescriptor","customMarkerIcon","_regeneratorRuntime","hasOwnProperty","c","asyncIterator","toStringTag","define","wrap","Generator","Context","makeInvokeMethod","tryCatch","type","arg","h","s","y","GeneratorFunction","GeneratorFunctionPrototype","d","v","values","g","defineIteratorMethods","_invoke","AsyncIterator","invoke","resolve","__await","callInvokeWithMethodAndArg","Error","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","isNaN","isGeneratorFunction","mark","awrap","async","Promise","prev","charAt","stop","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","arguments","_next","_throw","ownKeys","getOwnPropertySymbols","filter","_objectSpread","getOwnPropertyDescriptors","defineProperties","DiffTool","leftItem","setLeftItem","_useState4","rightItem","setRightItem","_useState6","userSelectedSourceItem","setUserSelectedSourceItem","viewState","sourceItem","useEffect","originalSettings","showSplitter","isMapFullScreen","elements","set","visible","itemsPromise","all","createSplitItem","SplitDirection","LEFT","RIGHT","lItem","rItem","setIsMapFullScreen","_ref4","removeSplitItem","Main","changeSourceItem","_diffItem$styleSelect3","_useState8","setLocation","setLocationPickError","_useState12","isPickingNewLocation","setIsPickingNewLocation","leftDatePickerHandle","useRef","rightDatePickerHandle","diffItem","currentLeftDate","currentRightDate","diffItemName","format","d1","d2","diffableItemsInWorkbench","workbench","items","DiffableMixin","isMixedInto","canDiffImages","previewStyle","_diffItem$styleSelect","styleSelectableDimensions","selectedId","currentDiffStyle","diffStyleId","availableDiffStyles","filterOutUndefined","map","_diffItem$styleSelect2","options","find","id","diffLegendUrl","getLegendUrlForStyle","previewLegendUrl","showItem","model","hasOpacity","hideItem","handleChangeSourceItem","newSourceItem","uniqueId","target","handleChangePreviewStyle","styleId","_leftItem$styleSelect","_rightItem$styleSelec","setDimensionValue","handleChangeDiffStyle","onUserPickingLocation","_pickingLocation","onUserPickLocation","pickedLocationValue","feature","features","doesFeatureBelongToItem","setTimeFilterFeature","providerCoords","unsetDates","generateDiff","overlays","remove","add","showDiffImage","diffItemProperties","updateModelFromJson","resetTool","clearDiffImage","setDefaultDiffStyle","setLocationFromActiveSearch","_callee","markerLocation","part","imageryProvider","promises","_context","MappableMixin","mapItems","is","setTimeFilterFromLocation","some","ok","_diffItem$timeFilterC","timeFilterCoordinates","height","closePanel","closeTool","isShowingDiff","isReadyToGenerateDiff","WorkflowPanel","icon","difference","_StyledDiv","medium","Group","LocationAndDatesDisplayBox","bold","small","alignItemsFlexStart","large","_leftDatePickerHandle","current","isLink","_rightDatePickerHandl","Selector","label","spacingBottom","LegendImage","width","src","GenerateButton","_StyledDiv2","_StyledDiv3","fillColor","styledHeight","info","left","_StyledBackButton","transparentBg","$_css2","_StyledButton","fullWidth","flexWrap","backgroundColor","dark","AreaFilterSelection","document","getElementById","BackButton","secondary","_StyledText","$_css3","parseCustomMarkdownToReact","injectTermsAsTooltips","tooltipTerms","configParameters","helpContentTerms","Select","locationText","_prettifyCoordinates","prettifyCoordinates","digits","_StyledBox","styledMinWidth","location2","styledMinHeight","_StyledText2","extraExtraLarge","textAlignCenter","div","darkWithOverlay","marginTop","onLoad","currentTarget","onError","_x","_x2","_createSplitItem","_callee2","splitDirection","_context2","SplitItemReference","createGuid","addModel","loadReference","_newItem$styleSelecta","newItem","featureInfoTemplate","template","_newItem$styleSelecta2","trueColor","isDefined","search","availableStyles","_item$styleSelectable","sourceReference","contains","removeModelReferences","_feature$imageryLayer","imageryLayer","m","im","Cartographic","toRadians","tile","tilingScheme","positionToTileXY","tileCoords","x","level","hasTraits","ImageryProviderTraits","md","_ref6"],"sourceRoot":""}